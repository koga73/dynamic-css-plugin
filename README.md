# Dynamic CSS Plugin

`"btn-primary btn-primary-disabled"` ==> `.app_Xscyf.app_LfRuA`

**_Patch_. _Inject_. _Transform_.**

-   ✔️ React
-   ✔️ Vite
-   ✔️ Webpack

## Getting Started

-   👌 Prevent conflicts with third party CSS
-   ❤️‍🔥 Smaller bundle size
-   💥 Obfuscate class names

### Install

```bash
npm install dynamic-css-plugin -D
```

---

### _Vite_

`vite.config.js`

#### Import into _Vite_ config

```js
import dynamicCssPlugin from "dynamic-css-plugin/vite";
```

#### Add to _Vite_ plugins

```js
plugins: [
	dynamicCssPlugin({
		transform: "app_[md4:hash:base64:5]"
	})
];
```

---

### _Webpack_

`webpack.config.js`

#### Import into _Webpack_ config

```js
import DynamicCssPlugin from "dynamic-css-plugin/webpack";
```

#### Add to _Webpack_ plugins

```js
plugins: [
	new DynamicCssPlugin({
		transform: "app_[md4:hash:base64:5]"
	})
];
```

## Options

-   `enabled: true` - If false, the plugin will not run

-   `transform: {}` - The transform configuration

    -   `transform.template: "[md4:hash:base64:5]"` - The format of the generated class names

        -   **"prefix\_[{algorithm}:{hash}:{encoding}:{length}]"**

    -   `transform.attributes: /^(class)$/` - Regex for HTML attributes to transform

    -   `transform.ignoreTags: /(path)/i` - Regex for HTML tags to ignore

    -   `transform.ignoreValues: /^(css|sc|icon)-/i` - Regex for HTML attribute values to ignore

-   `patch: {}` - The patch configuration

    -   `patch.test: /react-dom/` Test pattern
    -   `patch.search: /(\w+)\.setAttribute\(/g` Search pattern
    -   `patch.replace: globalThis['${scope}setAttributeDynamic'].call($1,` Replace pattern
    -   `patch.scope: ""` - Applies a scope to the injected method. Useful if multiple instances are on the same page such as with micro-frontends.

-   `inject: {}` -
    -   `inject.entryName: undefined` The entry point for the injected method. If undefined the first entry point is used.
    -   `inject.fileName: index_generated.js` The code to inject

### Notes

> **ignoreValues** default excludes class names with the following prefixes that are commonly generated by other libraries and should not be transformed.

-   **css-** which is the [emotion](https://emotion.sh/) default
-   **sc-** which is the [styled-components](https://styled-components.com) default
-   **icon-** which is the the standard for icon classes
